{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create Opportunity â€“ CampusLink</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Use the SAME header + global org dashboard styles -->
  <link rel="stylesheet" href="{% static 'Myapp/org_dashboard.css' %}">
  <link rel="stylesheet" href="{% static 'Myapp/post_opportunity.css' %}">

  <!-- ðŸ‘‰ Select2 styles + jQuery + Select2 JS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>


<body>

<!-- ============================
     NEW HEADER (Identical to org_dashboard)
============================ -->
<header class="header">
    <div class="logo">
      <i class="fa-solid fa-graduation-cap"></i>
      <span>CampusLink</span>
    </div>

    <nav>
      <a href="{% url 'organization_dashboard' %}">Dashboard</a>
      <a href="{% url 'post_opportunity' %}" class="active">Post Opportunity</a>
      <a href="{% url 'manage_postings' %}">Applicants</a>
      <a href="{% url 'org_profile' %}">Profile</a>

    </nav>

    <div class="search-profile">
      <input type="text" class="top-search" placeholder="Search opportunities...">

      <!-- PROFILE DROPDOWN -->
      <div class="profile-dropdown">
          <img src="{% if user.profile.profile_picture %}
                        {{ user.profile.profile_picture.url }}
                    {% else %}
                        /static/Myapp/default-avatar.png
                    {% endif %}"
               alt="Profile"
               class="avatar"
               id="profileAvatar">

          <div class="dropdown-menu" id="orgDropdownMenu">
              <div class="dropdown-header">Organization</div>
              <a href="{% url 'org_profile' %}"><i class="fa-solid fa-user"></i> Profile</a>
              <a href="{% url 'manage_postings' %}"><i class="fa-solid fa-users"></i> Applicants</a>
              <a href="{% url 'submit_verification' %}">
                <i class="fa-solid fa-shield-check"></i> Verify Organization
              </a>
              <a href="{% url 'logout' %}"><i class="fa-solid fa-right-from-bracket"></i> Log out</a>
          </div>
      </div>
    </div>
</header>


<!-- ============================
     MAIN CONTENT (form)
============================ -->
<main>

  <div class="form-container">
    <h2><i class="fa-solid fa-pen-to-square"></i> Create New Opportunity</h2>

    {% if messages %}
      {% for message in messages %}
        <div class="feedback {% if message.tags == 'success' %}success{% else %}error{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <form method="POST">
  {% csrf_token %}

  <!-- Title -->
  <div class="form-group">
    <label for="title">Opportunity Title</label>
    <input type="text" id="title" name="title" required>
  </div>

  <!-- Description -->
  <div class="form-group">
    <label for="description">Description</label>
    <textarea id="description" name="description" rows="5" required></textarea>
  </div>

  <!-- Deadline -->
  <div class="form-group">
    <label for="deadline">Application Deadline</label>
    <input type="date" id="deadline" name="deadline" required>
  </div>

  <!-- â­ TAGS DROPDOWN -->
  <!-- â­ TAGS DROPDOWN (Select2) -->
<div class="form-group">
  <label for="tags">Tags</label>
  <select id="tags" name="tags" multiple>
    <option value="Communication">Communication</option>
    <option value="Outreach">Outreach</option>
    <option value="Events">Events</option>
    <option value="Leadership">Leadership</option>
    <option value="Marketing">Marketing</option>
    <option value="Creative">Creative</option>
    <option value="Technical">Technical</option>
  </select>
</div>


  <button type="submit" class="submit-btn">
    <i class="fa-solid fa-circle-check"></i> Submit Posting
  </button>
</form>

  </div>

</main>



<!-- ============================
     DROPDOWN + MODAL SCRIPTS
============================ -->
<script>

document.getElementById("profileAvatar").addEventListener("click", function () {
    const menu = document.getElementById("orgDropdownMenu");
    menu.style.display = menu.style.display === "flex" ? "none" : "flex";
});

document.addEventListener("click", function (event) {
    if (!event.target.closest(".profile-dropdown")) {
        const menu = document.getElementById("orgDropdownMenu");
        if (menu) menu.style.display = "none";
    }
});
</script>

<script>
  $(document).ready(function() {
      $('#tags').select2({
          placeholder: "Select one or more tags",
          allowClear: true,
          width: '100%'
      });
  });
</script>

</body>
</html>
