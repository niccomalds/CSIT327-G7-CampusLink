{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Review Organization â€“ CampusLink</title>
    
    <!-- Dashboard theme -->
    <link rel="stylesheet" href="{% static 'Myapp/admin_dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'Myapp/admin_verification.css' %}">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <i class="fa-solid fa-graduation-cap"></i>
            <span>CampusLink</span>
        </div>
        
        <nav>
            <a href="{% url 'admin_dashboard' %}">Dashboard</a>
            <a href="{% url 'admin_verification_dashboard' %}" class="active">Verifications</a>
            <a href="#">Reports</a>
            <a href="#">Settings</a>
        </nav>
        
        <div class="search-profile">
            <input type="text" class="top-search" placeholder="Search...">
            
            <div class="profile-dropdown" id="adminProfileDropdown">
                <img src="/static/Myapp/default-avatar.png" alt="Profile" class="avatar" id="profileAvatar">
                
                <div class="dropdown-menu" id="adminDropdownMenu">
                    <div class="dropdown-header">Administrator</div>
                    <a href="#"><i class="fa-solid fa-user"></i> Profile</a>
                    <a href="#"><i class="fa-solid fa-gear"></i> Settings</a>
                    <a href="{% url 'logout' %}"><i class="fa-solid fa-right-from-bracket"></i> Log out</a>
                </div>
            </div>
        </div>
    </header>

    <main class="admin-dashboard">
        <div class="dashboard-header">
            <h1><i class="fa-solid fa-file-circle-check"></i> Review Organization Verification</h1>
        </div>
        
        <div class="verification-container">
            <div class="verification-header">
                <h2>{{ profile.org_name }}</h2>
                <p>Submitted on {{ profile.verification_submitted_at|date:"F d, Y" }}</p>
            </div>
            
            <div class="verification-details">
                <div class="form-group">
                    <label>Organization Name</label>
                    <p>{{ profile.org_name }}</p>
                </div>
                
                <div class="form-group">
                    <label>Institutional Email</label>
                    <p>{{ profile.institutional_email }}</p>
                </div>
                
                <div class="form-group">
                    <label>Verification Status</label>
                    <p><span class="status-badge {{ profile.verification_status }}">{{ profile.get_verification_status_display }}</span></p>
                </div>
                
                <div class="form-group">
                    <label>Documents Provided</label>
                    <div class="document-preview">
                        {% if profile.verification_documents %}
                            <img src="{{ profile.verification_documents.url }}" alt="Verification Document" style="max-width: 100%;">
                        {% else %}
                            <p>No documents uploaded</p>
                        {% endif %}
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Rejection Reason (for rejection only)</label>
                    <textarea name="reason" rows="3" placeholder="Reason for rejection..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>Admin Notes</label>
                    <textarea name="admin_notes" rows="3" placeholder="Additional notes..."></textarea>
                </div>
                
                <form method="POST">
                    {% csrf_token %}
                    <div class="form-footer">
                        <a href="{% url 'admin_verification_dashboard' %}" class="btn-secondary">
                            <i class="fa-solid fa-arrow-left"></i> Back to Dashboard
                        </a>
                        <div>
                            <button type="submit" name="action" value="reject" class="btn-reject">
                                <i class="fa-solid fa-times"></i> Reject
                            </button>
                            <button type="submit" name="action" value="approve" class="btn-approve">
                                <i class="fa-solid fa-check"></i> Approve
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script>
        document.getElementById("profileAvatar").addEventListener("click", function () {
            const menu = document.getElementById("adminDropdownMenu");
            menu.style.display = menu.style.display === "flex" ? "none" : "flex";
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", function (event) {
            if (!event.target.closest(".profile-dropdown")) {
                const menu = document.getElementById("adminDropdownMenu");
                if (menu) menu.style.display = "none";
            }
        });
        

    </script>
</body>
</html>