{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CampusLink Organization Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>

  <!-- Django static CSS -->
  <link rel="stylesheet" href="{% static 'Myapp/org_dashboard.css' %}">
</head>

<body>
  <div class="navbar">
    <div class="navbar-container">

      <div class="logo"><i class="fa-solid fa-user-graduate"></i>CampusLink</div>

      <div class="nav">
        <a href="{% url 'organization_dashboard' %}" class="active">Dashboard</a>
        <a href="{% url 'post_opportunity' %}">Post Opportunity</a>
        <a href="{% url 'applicants_list' %}">Applicants</a>
        <a href="{% url 'org_profile' %}">Org Profile</a>
      </div>

      <div class="searchbar">
        <input type="text" placeholder="Search opportunities..." aria-label="Search Opportunities">
      </div>

      <div class="right">
        <div class="notif" tabindex="0" aria-label="Notifications">
          <i class="fa-regular fa-bell"></i>
          <span class="notif-badge">2</span>
        </div>

        <div class="avatar" tabindex="0" aria-label="User Profile">
          <i class="fa-solid fa-user"></i>

          <div class="dropdown-content">
            <ul>
              <li><span>Organization</span></li>
              <li><a href="{% url 'org_profile' %}">Profile</a></li>
              <li><a href="{% url 'org_settings' %}">Settings</a></li>
              <li><a href="{% url 'logout' %}">Log out</a></li>
            </ul>
          </div>
        </div>

      </div>

    </div>
  </div>

  <main>

    <div class="org-header-row">
      <div class="org-header">
        <h2>Organization <span class="accent">Dashboard</span></h2>
        <p>Manage your opportunities and connect with talented students.</p>
      </div>
      <button class="post-opportunity-header-btn">
        <i class="fa-regular fa-clock"></i> Post New Opportunity
      </button>
    </div>

    <div class="stats-section">
      <div class="stat-card">
        <div class="desc">Active Postings</div>
        <span>5</span>
        <div class="change up">+2 from last month</div>
      </div>

      <div class="stat-card">
        <div class="desc">Total Applicants</div>
        <span>84</span>
        <div class="change up">+12% from last week</div>
      </div>

      <div class="stat-card">
        <div class="desc">Total Views</div>
        <span>1247</span>
        <div class="change up">+8% from last week</div>
      </div>

      <div class="stat-card">
        <div class="desc">Acceptance Rate</div>
        <span>76%</span>
        <div class="bar"><div class="bar-fill" style="width:76%"></div></div>
      </div>
    </div>

    <div class="quick-actions-card">
      <div class="quick-actions-header">
        <h3>Quick Actions</h3>
        <p>Common tasks to manage your opportunities efficiently.</p>
      </div>

      <div class="quick-actions-list">
        <button class="quick-action-card-btn">
          <i class="fa-regular fa-clock"></i>
          Post Opportunity
        </button>

        <button class="quick-action-card-btn">
          <i class="fa-regular fa-user"></i>
          Review Applicants
        </button>

        <button class="quick-action-card-btn">
          <i class="fa-regular fa-star"></i>
          Update Profile
        </button>
      </div>
    </div>

    <div class="main-content">

      <div class="left-content">
        <h3><i class="fa-solid fa-briefcase"></i> Recent Postings</h3>

        <div class="posting posting-hover">
          <div class="posting-details">
            <h4>Software Engineering Intern <span class="badge active glow">Active</span></h4>
            <div class="posting-meta">
              <span><i class="fa-regular fa-user"></i> 24 applicants</span>
              <span><i class="fa-regular fa-eye"></i> 156 views</span>
              <span>Ended</span>
            </div>
          </div>
        </div>

        <div class="posting posting-hover">
          <div class="posting-details">
            <h4>Marketing Assistant <span class="badge active glow">Active</span></h4>
            <div class="posting-meta">
              <span><i class="fa-regular fa-user"></i> 12 applicants</span>
              <span><i class="fa-regular fa-eye"></i> 89 views</span>
              <span>Ended</span>
            </div>
          </div>
        </div>

        <div class="posting posting-hover">
          <div class="posting-details">
            <h4>Research Volunteer <span class="badge closed">Closed</span></h4>
            <div class="posting-meta">
              <span><i class="fa-regular fa-user"></i> 18 applicants</span>
              <span><i class="fa-regular fa-eye"></i> 203 views</span>
              <span>Ended</span>
            </div>
          </div>
        </div>

        <button class="view-all"><i class="fa-solid fa-arrow-right"></i> View All Postings</button>
      </div>

      <div class="right-content">
        <h3><i class="fa-solid fa-clock"></i> Activity Summary</h3>

        <ul class="activity-list">
          <li><span class="dot blue"></span>New application for Software Engineering Intern <span class="time">2 minutes ago</span></li>

          <li><span class="dot orange"></span>Marketing Assistant position viewed 15 times <span class="time">1 hour ago</span></li>

          <li><span class="dot gray"></span>Research Volunteer application deadline reached <span class="time">3 hours ago</span></li>

          <li><span class="dot green"></span>Profile viewed by 8 students <span class="time">5 hours ago</span></li>
        </ul>

        <button class="view-all-activity"><i class="fa-solid fa-list"></i> View All Activity</button>
      </div>

    </div>
  </main>

  <script>
    document.querySelectorAll('.quick-action-card-btn').forEach(btn => {
      btn.addEventListener('click', () => alert('This demo button is not yet functional!'));
    });

    document.querySelectorAll('.bar-fill').forEach(function(bar) {
      let width = 0;
      const maxWidth = parseInt(bar.style.width);
      bar.style.width = "0";

      setTimeout(function animate() {
        if (width < maxWidth) {
          width += 2;
          bar.style.width = width + "%";
          requestAnimationFrame(animate);
        } else {
          bar.style.width = maxWidth + "%";
        }
      }, 350);
    });

    document.querySelector('.avatar').addEventListener('click', function() {
      const dropdown = this.querySelector('.dropdown-content');
      dropdown.style.display = (dropdown.style.display === 'block' ? 'none' : 'block');
    });

    document.addEventListener('click', function(event) {
      if (!event.target.closest('.avatar')) {
        const dropdown = document.querySelector('.dropdown-content');
        if (dropdown) dropdown.style.display = 'none';
      }
    });
  </script>

</body>
</html>
